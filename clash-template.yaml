allow-lan: true
mode: rule
log-level: info
ipv6: false

dns:
  enable: true
  enhanced-mode: fake-ip
  nameserver:
    - 1.1.1.1
    - 8.8.8.8

{{ conf | except("proxy-groups", "port", "mode", "rules") | yaml }}

proxy-groups:
- name: 'PROXY'
  type: 'select'
  proxies:
  {{ proxies | map(attribute='inbound_tag') | list | unique | yaml | indent(2) }}

rule-providers:
  my_direct:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/OneUno1/mihomo-rules/main/my-direct-rules.yaml"
    path: ./ruleset/my_direct.yaml
    interval: 86400

rules:
  - RULE-SET,my_direct,DIRECT
  - GEOIP,RU,DIRECT,no-resolve
  - MATCH,PROXY
